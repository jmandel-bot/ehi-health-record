[
  {
    "table": "PATIENT",
    "role": "root",
    "path": "$",
    "note": "Document root. PK: PAT_ID. Merged with PATIENT_2 through PATIENT_MYC."
  },
  {
    "table": "ALLERGY",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.allergies[]",
    "join_on": "PAT_ID via PAT_ALLERGIES",
    "note": "ALLERGY_PAT_CSN is provenance (encounter where edited), not structural parent."
  },
  {
    "table": "ALLERGY_REACTIONS",
    "role": "child",
    "parent": "ALLERGY",
    "path": "$.allergies[].reactions[]",
    "join_on": "ALLERGY_ID"
  },
  {
    "table": "PROBLEM_LIST",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.problems[]",
    "join_on": "PAT_ID via PAT_PROBLEM_LIST",
    "note": "Patient-level. DATE_OF_ENTRY/ENTRY_USER_ID is provenance."
  },
  {
    "table": "PROBLEM_LIST_HX",
    "role": "child",
    "parent": "PROBLEM_LIST",
    "path": "$.problems[].history[]",
    "join_on": "PROBLEM_LIST_ID"
  },
  {
    "table": "ORDER_MED",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.medications[]",
    "join_on": "PAT_ID",
    "note": "Also has PAT_ENC_CSN_ID crossref to prescribing encounter."
  },
  {
    "table": "IMMUNE",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.immunizations[]",
    "join_on": "PAT_ID (indirect)",
    "note": "IMM_CSN is optional crossref to encounter where given."
  },
  {
    "table": "IMMUNE_HISTORY",
    "role": "child",
    "parent": "IMMUNE",
    "path": "$.immunizations[].history[]",
    "join_on": "IMMUNE_ID"
  },
  {
    "table": "COVERAGE",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.coverage[]",
    "join_on": "PAT_ID (indirect via CVG_ACCT_LIST)"
  },
  {
    "table": "COVERAGE_BENEFITS",
    "role": "child",
    "parent": "COVERAGE",
    "path": "$.coverage[].benefits[]",
    "join_on": "COVERAGE_ID"
  },
  {
    "table": "SOCIAL_HX",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.social_history[]",
    "join_on": "PAT_ID (indirect)",
    "note": "Versioned. PAT_ENC_CSN_ID is this record's own contact CSN. HX_LNK_ENC_CSN crossrefs the clinical encounter where reviewed."
  },
  {
    "table": "SURGICAL_HX",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.surgical_history[]",
    "join_on": "PAT_ID (indirect)",
    "note": "Same HX_LNK_ENC_CSN pattern as SOCIAL_HX."
  },
  {
    "table": "FAMILY_HX_STATUS",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.family_history[]",
    "join_on": "PAT_ID (indirect)",
    "note": "Same HX_LNK_ENC_CSN pattern."
  },
  {
    "table": "REFERRAL",
    "role": "child",
    "parent": "PATIENT",
    "path": "$.referrals[]",
    "join_on": "PAT_ID (indirect)"
  },
  {
    "table": "REFERRAL_HIST",
    "role": "child",
    "parent": "REFERRAL",
    "path": "$.referrals[].history[]",
    "join_on": "REFERRAL_ID"
  },
  {
    "table": "REFERRAL_DX",
    "role": "child",
    "parent": "REFERRAL",
    "path": "$.referrals[].diagnoses[]",
    "join_on": "REFERRAL_ID"
  },
  {
    "table": "PAT_ENC",
    "role": "root",
    "path": "$.encounters[]",
    "join_on": "PAT_ID",
    "note": "PK: PAT_ENC_CSN_ID. Excludes registration/PCP-change contacts."
  },
  {
    "table": "PAT_ENC_DX",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].diagnoses[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "PAT_ENC_RSN_VISIT",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].reasons_for_visit[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "PAT_ENC_LOS_DX",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].los_diagnoses[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "ORDER_PROC",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].orders[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "ORDER_RESULTS",
    "role": "child",
    "parent": "ORDER_PROC",
    "path": "$.encounters[].orders[].results[]",
    "join_on": "ORDER_PROC_ID"
  },
  {
    "table": "ORDER_DX_PROC",
    "role": "child",
    "parent": "ORDER_PROC",
    "path": "$.encounters[].orders[].diagnoses[]",
    "join_on": "ORDER_PROC_ID"
  },
  {
    "table": "ORDER_COMMENT",
    "role": "child",
    "parent": "ORDER_PROC",
    "path": "$.encounters[].orders[].comments[]",
    "join_on": "ORDER_PROC_ID"
  },
  {
    "table": "HNO_INFO",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].notes[]",
    "join_on": "PAT_ENC_CSN_ID",
    "note": "PAT_ENC_CSN_ID links note to clinical encounter. NOTE_CSN_ID is the note's own contact CSN."
  },
  {
    "table": "ABN_FOLLOW_UP",
    "role": "extension",
    "parent": "HNO_INFO",
    "path": "$.encounters[].notes[].(merged)",
    "join_on": "NOTE_ID",
    "note": "Extended note metadata: author, status, filing time. 1:many (one row per note contact)."
  },
  {
    "table": "HNO_PLAIN_TEXT",
    "role": "child",
    "parent": "HNO_INFO",
    "path": "$.encounters[].notes[].text[]",
    "join_on": "NOTE_ID",
    "note": "Multi-line text content."
  },
  {
    "table": "TREATMENT",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].treatments[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "TREATMENT_TEAM",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].treatment_team[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "PAT_ENC_CURR_MEDS",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].current_meds_snapshot[]",
    "join_on": "PAT_ENC_CSN_ID",
    "note": "Point-in-time medication list at this encounter."
  },
  {
    "table": "PAT_ENC_APPT",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].appointment",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "PAT_ENC_DISP",
    "role": "extension",
    "parent": "PAT_ENC",
    "path": "$.encounters[].disposition",
    "join_on": "PAT_ENC_CSN_ID",
    "note": "1:1 follow-up/disposition info."
  },
  {
    "table": "IP_DATA_STORE",
    "role": "extension",
    "parent": "PAT_ENC",
    "path": "$.encounters[].inpatient_data",
    "join_on": "EPT_CSN = PAT_ENC_CSN_ID",
    "note": "1:1. PAT_ENC.INPATIENT_DATA_ID points back."
  },
  {
    "table": "ECHKIN_STEP_INFO",
    "role": "child",
    "parent": "PAT_ENC",
    "path": "$.encounters[].echeckin[]",
    "join_on": "PAT_ENC_CSN_ID"
  },
  {
    "table": "ARPB_TRANSACTIONS",
    "role": "root",
    "path": "$.billing.transactions[]",
    "note": "PK: TX_ID. Professional billing charges/payments/adjustments."
  },
  {
    "table": "ARPB_TX_ACTIONS",
    "role": "child",
    "parent": "ARPB_TRANSACTIONS",
    "path": "$.billing.transactions[].actions[]",
    "join_on": "TX_ID"
  },
  {
    "table": "ARPB_CHG_ENTRY_DX",
    "role": "child",
    "parent": "ARPB_TRANSACTIONS",
    "path": "$.billing.transactions[].diagnoses[]",
    "join_on": "TX_ID"
  },
  {
    "table": "ARPB_TX_MATCH_HX",
    "role": "child",
    "parent": "ARPB_TRANSACTIONS",
    "path": "$.billing.transactions[].match_history[]",
    "join_on": "TX_ID"
  },
  {
    "table": "PMT_EOB_INFO_I",
    "role": "child",
    "parent": "ARPB_TRANSACTIONS",
    "path": "$.billing.transactions[].eob[]",
    "join_on": "TX_ID"
  },
  {
    "table": "ARPB_VISITS",
    "role": "root",
    "path": "$.billing.visits[]",
    "crossref": "PRIM_ENC_CSN_ID -> encounters[]",
    "note": "PK: PB_VISIT_ID. Bridges encounters to billing. One visit = one encounter's billing."
  },
  {
    "table": "HAR_ALL",
    "role": "root",
    "path": "$.billing.hospital_accounts[]",
    "crossref": "PRIM_ENC_CSN_ID -> encounters[]"
  },
  {
    "table": "ACCOUNT",
    "role": "root",
    "path": "$.billing.guarantor_accounts[]",
    "note": "PK: ACCOUNT_ID. The guarantor/payment entity."
  },
  {
    "table": "CL_REMIT",
    "role": "root",
    "path": "$.billing.remittances[]",
    "note": "PK: IMAGE_ID. Insurance remittance/EOB records."
  },
  {
    "table": "CL_RMT_SVCE_LN_INF",
    "role": "child",
    "parent": "CL_REMIT",
    "path": "$.billing.remittances[].service_lines[]",
    "join_on": "IMAGE_ID"
  },
  {
    "table": "MYC_MESG",
    "role": "root",
    "path": "$.messages[]",
    "note": "PK: MESSAGE_ID. PARENT_MESSAGE_ID chains replies. PAT_ENC_CSN_ID often NULL."
  },
  {
    "table": "MSG_TXT",
    "role": "child",
    "parent": "MYC_MESG",
    "path": "$.messages[].text[]",
    "join_on": "MESSAGE_ID"
  },
  {
    "table": "MYC_MESG_RTF_TEXT",
    "role": "child",
    "parent": "MYC_MESG",
    "path": "$.messages[].rtf_text[]",
    "join_on": "MESSAGE_ID"
  },
  {
    "table": "PAT_MYC_MESG",
    "role": "crossref",
    "parent": "PAT_ENC",
    "path": "$.encounters[].mychart_message_links[]",
    "join_on": "PAT_ENC_CSN_ID",
    "note": "Bridge table: encounter -> message. MYCHART_MESSAGE_ID -> MYC_MESG.MESSAGE_ID"
  },
  {
    "table": "CLARITY_EDG",
    "role": "lookup",
    "resolves": "diagnosis names",
    "pk": "DX_ID"
  },
  {
    "table": "CLARITY_SER",
    "role": "lookup",
    "resolves": "provider names",
    "pk": "PROV_ID"
  },
  {
    "table": "CLARITY_EMP",
    "role": "lookup",
    "resolves": "user/employee names",
    "pk": "USER_ID"
  },
  {
    "table": "CLARITY_DEP",
    "role": "lookup",
    "resolves": "department names",
    "pk": "DEPARTMENT_ID"
  },
  {
    "table": "CLARITY_LOC",
    "role": "lookup",
    "resolves": "location names",
    "pk": "LOC_ID"
  },
  {
    "table": "CLARITY_EAP",
    "role": "lookup",
    "resolves": "procedure names",
    "pk": "PROC_ID"
  },
  {
    "table": "CLARITY_EPM",
    "role": "lookup",
    "resolves": "payor names",
    "pk": "PAYOR_ID"
  },
  {
    "table": "CLARITY_EPP",
    "role": "lookup",
    "resolves": "benefit plan names",
    "pk": "BENEFIT_PLAN_ID"
  },
  {
    "table": "CLARITY_MEDICATION",
    "role": "lookup",
    "resolves": "medication details",
    "pk": "MEDICATION_ID"
  },
  {
    "table": "CLARITY_IMMUNZATN",
    "role": "lookup",
    "resolves": "immunization types",
    "pk": "IMMUNZATN_ID"
  }
]